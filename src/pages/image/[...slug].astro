---

// Imports

import PMCF from '../../layouts/PMCF.astro';
import {Image} from 'astro:assets';

// Content

import {getCollection} from 'astro:content';
export async function getStaticPaths() {
    const allImages = await getCollection('image');
    return allImages.map(entry => ({
        params: {slug: entry.slug},
        props: {entry},
    }));
};
const {entry} = Astro.props;
const {Content} = await entry.render();

---

<PMCF title={entry.data.title} description={entry.data.description}>
    <header>
        <a id="backLink" href="#">Back</a>
    </header>
    <article>
        <Image src={entry.data.cover} alt={entry.data.coverAlt} width="200"/>
        <h1>{entry.data.title}</h1>
        <Content/>
    </article>
</PMCF>

<script>

// Back button after transitions

const goBack = () => {
    history.back();
};
const setButton = () => {
    const backLink: HTMLElement | null = document.getElementById("backLink");
    if (backLink) {
        backLink.removeEventListener("click", goBack); 
        backLink.addEventListener("click", goBack);
    }
};
setButton();
document.addEventListener('DOMContentLoaded', setButton);

</script>